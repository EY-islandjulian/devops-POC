name: Push Release Folder to PKG Branch
on:
 workflow_dispatch:
permissions:
 contents: write
 actions: read
jobs:
 sync-release-folder:
   runs-on: ubuntu-latest
   steps:
     - name: Set folder name manually for now
       run: echo "FOLDER_NAME=EXT-001.CodeConfig" >> $GITHUB_ENV
     - name: Checkout develop branch
       uses: actions/checkout@v4
       with:
         ref: develop
         fetch-depth: 0
     - name: Verify folder exists
       run: |
         echo "Looking for folder: '$FOLDER_NAME'"
         if [ ! -d "$FOLDER_NAME" ]; then
           echo "❌ ERROR: Folder '$FOLDER_NAME' not found in develop"
           exit 1
         fi
     - name: Copy folder into temp
       run: |
         rm -rf sync-folder
         mkdir -p sync-folder
         echo "Copying develop/$FOLDER_NAME → sync-folder/"
         cp -a "$FOLDER_NAME"/. sync-folder/ || echo "⚠️ Folder is empty — continuing"
     - name: Checkout PKG branch
       uses: actions/checkout@v4
       with:
         ref: PKG
         fetch-depth: 0
     - name: Copy into PKG branch
       run: |
         echo "Replacing PKG/$FOLDER_NAME with new contents"
         rm -rf "$FOLDER_NAME"
         mkdir -p "$FOLDER_NAME"
         cp -a sync-folder/. "$FOLDER_NAME"/ || echo "⚠️ Temp folder empty — nothing to copy"
     - name: Commit & push
       run: |
         git config --global user.name "github-actions"
         git config --global user.email "github-actions@github.com"
         git add "$FOLDER_NAME"
         git commit -m "Sync folder '$FOLDER_NAME' from develop to PKG" || echo "No changes to commit"
         git push origin PKG
